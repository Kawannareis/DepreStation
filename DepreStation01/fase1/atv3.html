<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> Jogo da Mem√≥ria</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Press Start 2P', sans-serif;
    margin: 0;
    padding: 0;
    background: #000;
    color: #fff;
    text-align: center;
    overflow-x: hidden;
  }

  #fundoVideo {
    position: fixed;
    top:0;
    left:0;
    width:100vw;
    height:100vh;
    object-fit:cover;
    z-index:-1;
  }

  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background: transparent;
    position: sticky;
    top:0;
    z-index:10;
  }

  header button {
    background: #5c4dff;
    border: none;
    border-radius: 8px;
    color: #fff;
    padding: 8px 12px;
    margin: 0 5px;
    font-size: 12px;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
  }
  header button:hover { transform: scale(1.1); box-shadow:0 0 10px #8b7dff; }

  h1 { margin-top: 10px; color: #fff; }

  #mensagem { margin: 10px 0 20px; font-size: 14px; }

  #tabuleiro {
    display: grid;
    gap: 10px;
    justify-content: center;
    margin: 0 auto 20px;
    max-width: 90vw;
  }

  .carta {
    width: 60px;
    height: 60px;
    background: #88927b;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    border-radius: 10px;
    cursor: pointer;
    user-select: none;
    transition: transform 0.2s, background 0.2s;
    color: transparent;
  }

  .carta.virada {
    background: #66fcf1;
    color: #000;
  }

  #btnProxima {
    display: none;
    margin-top: 25px;
    padding: 10px 15px;
    font-size: 14px;
    border-radius: 8px;
    background: #5c4dff;
    color: #fff;
    border: none;
    cursor: pointer;
  }

  #btnProxima:hover { transform: scale(1.05); box-shadow:0 0 10px #8b7dff; }

</style>
</head>
<body>

<video autoplay muted loop id="fundoVideo">
  <source src="./fundo.mp4" type="video/mp4">
</video>

<header>
  <div>
    <button id="btnSom">üîä</button>
    <button id="btnAjuda">‚ùó</button>
  </div>
  <div>
    <button id="btnEstrelas">‚≠ê 0</button>
    <button id="btnPerfil">üë§</button>
  </div>
</header>

<h1>Jogo da Mem√≥ria</h1>
<div id="mensagem"></div>
<div id="tabuleiro"></div>
<button id="btnProxima">Pr√≥xima Subatividade ‚û°Ô∏è</button>

<script>
let totalEstrelas = 0;
let subAtividade = 0;
let cartasViradas = [];
let cartasEncontradas = [];

const tabuleiro = document.getElementById('tabuleiro');
const mensagem = document.getElementById('mensagem');
const btnProxima = document.getElementById('btnProxima');

const alfabeto = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");

const subAtividades = [
  { tamanho: 4, pares: 8 },  // 4x4 = 16 cartas
  { tamanho: 4, pares: 8 }, // 6x6 = 36 cartas
  { tamanho: 6, pares: 18 }  // 8x8 = 64 cartas
];

// Fun√ß√£o para embaralhar cartas
function embaralhar(array) { return array.sort(() => Math.random() - 0.5); }

function criarTabuleiro() {
  cartasViradas = [];
  cartasEncontradas = [];
  btnProxima.style.display = 'none';
  mensagem.textContent = '';

  const { tamanho, pares } = subAtividades[subAtividade];
  tabuleiro.innerHTML = '';
  tabuleiro.style.gridTemplateColumns = `repeat(${tamanho}, 60px)`;

  const letrasEscolhidas = embaralhar([...alfabeto]).slice(0, pares);
  let cartas = [];
  letrasEscolhidas.forEach(letra => { cartas.push({ letra }); cartas.push({ letra }); });
  cartas = embaralhar(cartas);

  cartas.forEach(c => {
    const div = document.createElement('div');
    div.className = 'carta';
    div.dataset.letra = c.letra;
    div.addEventListener('click', () => virarCarta(div));
    tabuleiro.appendChild(div);
  });
}

function virarCarta(carta) {
  if (cartasViradas.length < 2 && !carta.classList.contains('virada') && !cartasEncontradas.includes(carta)) {
    carta.classList.add('virada');
    carta.textContent = carta.dataset.letra;
    cartasViradas.push(carta);

    if (cartasViradas.length === 2) {
      if (cartasViradas[0].dataset.letra === cartasViradas[1].dataset.letra) {
        cartasEncontradas.push(...cartasViradas);
        cartasViradas = [];
        if (cartasEncontradas.length === subAtividades[subAtividade].pares * 2) {
          if (subAtividade < subAtividades.length - 1) {
            mensagem.textContent = "Parab√©ns! Voc√™ completou esta subatividade!";
            btnProxima.style.display = 'inline-block';
            btnProxima.textContent = "Pr√≥xima Subatividade ‚û°Ô∏è";
          } else {
            totalEstrelas++;
            document.getElementById('btnEstrelas').textContent = `‚≠ê ${totalEstrelas}`;
            mensagem.textContent = "Parab√©ns! Voc√™ completou a Fase 1 e ganhou uma estrela! üåü";
            btnProxima.style.display = 'inline-block';
            btnProxima.textContent = "Voltar ao menu";
          }
        }
      } else {
        setTimeout(() => {
          cartasViradas.forEach(c => { c.classList.remove('virada'); c.textContent = ''; });
          cartasViradas = [];
        }, 800);
      }
    }
  }
}

// Evento do bot√£o
btnProxima.addEventListener('click', () => {
  if (subAtividade < subAtividades.length - 1) {
    subAtividade++;
    criarTabuleiro();
  } else {
    window.location.href = "../inicio.html";
    
  }
});

// Inicia primeira subatividade
criarTabuleiro();
</script>
</body>
</html>
