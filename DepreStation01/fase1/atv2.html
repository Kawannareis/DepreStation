<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fase 1 - Atividade 2: Ache as Letras</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Press Start 2P', sans-serif;
    margin: 0;
    padding: 0;
    background: #000;
    color: #fff;
    text-align: center;
    overflow: hidden;
  }

  #fundoVideo {
    position: fixed;
    top:0;
    left:0;
    width:100vw;
    height:100vh;
    object-fit:cover;
    z-index:-1;
  }

  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background: transparent;
    position: sticky;
    top:0;
    z-index:10;
  }

  header button {
    background: #5c4dff;
    border: none;
    border-radius: 8px;
    color: #fff;
    padding: 8px 12px;
    margin: 0 5px;
    font-size: 12px;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  header button:hover { 
    transform: scale(1.1); 
    box-shadow:0 0 10px #8b7dff; 
  }

  h1 { margin-top: 10px; color: #fff; }

  #mensagem { font-size: 14px; margin-top: 15px; }

  .letra {
    position: absolute;
    background: #88927b;
    color: #000;
    font-size: 22px;
    border-radius: 10px;
    padding: 15px 18px;
    cursor: pointer;
    user-select: none;
    transition: transform 0.1s;
  }

  .letra:hover { transform: scale(1.2); }
  .letra.clicada { background: #66fcf1; color: #000; }

  #btnProxima {
    display: none;
    margin-top: 25px;
    padding: 10px 15px;
    font-size: 14px;
    border-radius: 8px;
    background: #5c4dff;
    color: #fff;
    border: none;
    cursor: pointer;
  }

  #btnProxima:hover { transform: scale(1.05); box-shadow:0 0 10px #8b7dff; }

</style>
</head>
<body>

<video autoplay muted loop id="fundoVideo">
  <source src="./fundo.mp4" type="video/mp4">
</video>

<header>
  <div>
    <button id="btnSom">üîä</button>
    <button id="btnAjuda">‚ùó</button>
  </div>
  <div>
    <button id="btnEstrelas">‚≠ê 0</button>
    <button id="btnPerfil">üë§</button>
  </div>
</header>

<h1>Fase 1 - Atividade 2: Ache as Letras</h1>
<div id="mensagem"></div>
<button id="btnProxima">Pr√≥xima</button>

<script>
let totalEstrelas = 0;
let subAtividade = 0;
let acertos = 0;
let timeoutId;

const alfabeto = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
const vogais = ["A","E","I","O","U"];
const consoantes = alfabeto.filter(l => !vogais.includes(l));

const container = document.body;
const mensagem = document.getElementById('mensagem');
const btnProxima = document.getElementById('btnProxima');

const subAtividades = [
  { letras: alfabeto, tempo: 1800, acertosNecessarios: 10, titulo: "Conhecendo o Alfabeto" },
  { letras: vogais, tempo: 1400, acertosNecessarios: 7, titulo: "Conhecendo as Vogais" },
  { letras: consoantes, tempo: 800, acertosNecessarios: 5, titulo: "Conhecendo as Consoantes" }
];

function tocarSom(letra) { console.log("Som da letra:", letra); }

function mostrarLetra() {
  // Remove letras antigas
  document.querySelectorAll('.letra').forEach(l => l.remove());

  const { letras, tempo, acertosNecessarios, titulo } = subAtividades[subAtividade];
  document.querySelector('h1').textContent = `Fase 1 - ${titulo}`;

  const letraAtual = letras[Math.floor(Math.random() * letras.length)];
  const div = document.createElement('div');
  div.className = 'letra';
  div.textContent = letraAtual;

  const headerHeight = document.querySelector('header').offsetHeight;
  const maxWidth = window.innerWidth - 60;
  const maxHeight = window.innerHeight - 60 - headerHeight;
  div.style.left = Math.random() * maxWidth + "px";
  div.style.top = Math.random() * maxHeight + headerHeight + "px";

  div.addEventListener('click', () => {
    if (!div.classList.contains('clicada')) {
      div.classList.add('clicada');
      tocarSom(letraAtual);
      acertos++;

      if (acertos >= acertosNecessarios) {
        clearTimeout(timeoutId);
        document.querySelectorAll('.letra').forEach(l => l.remove());
        btnProxima.style.display = 'inline-block';
        if (subAtividade < 2) {
          btnProxima.textContent = "Pr√≥xima";
        } else {
          btnProxima.textContent = "Atividade 3 ‚û°Ô∏è";
        }
      }
    }
  });

  container.appendChild(div);

  timeoutId = setTimeout(() => {
    if (acertos < acertosNecessarios) {
      mostrarLetra();
    }
  }, tempo);
}

// Evento do bot√£o
btnProxima.addEventListener('click', () => {
  if (subAtividade < 2) {
    subAtividade++;
    acertos = 0;
    mensagem.textContent = '';
    btnProxima.style.display = 'none';
    mostrarLetra();
  } else {
    totalEstrelas++;
    document.getElementById('btnEstrelas').textContent = `‚≠ê ${totalEstrelas}`;
    window.location.href = "atv3.html"; // Redireciona para a pr√≥xima fase
  }
});

// Inicia a primeira subatividade
mostrarLetra();

</script>
</body>
</html>
