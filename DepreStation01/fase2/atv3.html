<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fase 2 - Atividade 3</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Press Start 2P', sans-serif;
    margin:0;
    padding:0;
    background: black;
    background-size: cover;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    height:100vh;
    color:#fff;
    text-align:center;
  }

  h1 {
    margin-bottom: 20px;
  }

  .palavra {
    display:flex;
    gap:10px;
    margin-bottom:30px;
  }

  .bloco {
    width:60px;
    height:60px;
    background:#4b4b4b;
    border-radius:12px;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:18px;
    cursor:pointer;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .bloco:hover {
    transform: scale(1.05);
    box-shadow:0 0 10px #a08fff;
  }

  .vazio {
    background:#333;
  }

  .opcoesContainer {
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    justify-content:center;
    max-width:400px;
  }

  .opcao {
    width:60px;
    height:60px;
    background:#5c4dff;
    border-radius:12px;
    display:flex;
    justify-content:center;
    align-items:center;
    cursor:pointer;
    font-size:16px;
  }

  .acertou { border: 3px solid #00ff00; }
  .errou { border: 3px solid #ff0000; }

  .feedback {
    margin-top:20px;
    height:20px;
    font-size:14px;
  }

</style>
</head>
<body>

<h1>Forme a palavra correta!</h1>
<div class="palavra" id="palavraContainer"></div>
<div class="opcoesContainer" id="opcoesContainer"></div>
<div class="feedback" id="feedback"></div>

<audio id="somAcerto" src="ding.mp3"></audio>
<audio id="somErro" src="bzz.mp3"></audio>

<script>
const palavras = [
  { palavra:"banana", silabas:["ba","na","na"], embaralhadas:["na","ba","na"] },
  { palavra:"cachorro", silabas:["ca","chor","ro"], embaralhadas:["chor","ro","ca"] },
  { palavra:"computador", silabas:["com","pu","ta","dor"], embaralhadas:["pu","dor","com","ta"] }
];

let indice = 0;
let atualSelecionado = 0;

const palavraContainer = document.getElementById('palavraContainer');
const opcoesContainer = document.getElementById('opcoesContainer');
const feedback = document.getElementById('feedback');
const somAcerto = document.getElementById('somAcerto');
const somErro = document.getElementById('somErro');

function mostrarPalavra() {
  if(indice >= palavras.length){
    feedback.textContent = "Parabéns! Próxima fase desbloqueada!";
    setTimeout(()=> window.location.href="../Fase3/atv1.html",2000);
    return;
  }

  atualSelecionado = 0;
  palavraContainer.innerHTML = '';
  opcoesContainer.innerHTML = '';
  feedback.textContent = '';

  const atual = palavras[indice];

  // Cria blocos vazios
  atual.silabas.forEach(() => {
    const bloco = document.createElement('div');
    bloco.className = 'bloco vazio';
    palavraContainer.appendChild(bloco);
  });

  // Cria opções embaralhadas
  atual.embaralhadas.forEach((silaba,i)=>{
    const btn = document.createElement('div');
    btn.className = 'opcao';
    btn.textContent = silaba;
    btn.addEventListener('click', ()=>{
      const blocos = document.querySelectorAll('.palavra .bloco');
      if(silaba === atual.silabas[atualSelecionado]){
        blocos[atualSelecionado].textContent = silaba;
        blocos[atualSelecionado].classList.remove('vazio');
        blocos[atualSelecionado].classList.add('acertou');
        somAcerto.play();
        atualSelecionado++;
        if(atualSelecionado === atual.silabas.length){
          indice++;
          setTimeout(mostrarPalavra,800);
        }
      } else {
        feedback.textContent = 'Ops! Tente novamente!';
        somErro.play();
      }
    });
    opcoesContainer.appendChild(btn);
  });
}

mostrarPalavra();
</script>

</body>
</html>
