<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Menu do Jogo</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Press Start 2P', sans-serif;
    margin:0;
    padding:0;
    background:#000;
    color:#fff;
    text-align:center;
    overflow:hidden;
  }

  /* Header */
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background: transparent;
    position: sticky;
    top: 0;
    z-index: 10;
  }

  header .left-buttons {
    display: flex;
    gap: 5px;
    align-items: center;
  }

  header .right-buttons {
    position: relative;
  }

  header button.general {
    background: #5c4dff;
    border: none;
    border-radius: 8px;
    color: white;
    padding: 8px 12px;
    font-size: 12px;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    animation: glow 2s infinite alternate;
  }

  header button:hover {
    transform: scale(1.1);
    box-shadow:0 0 15px #8b7dff;
  }

  @keyframes glow {
    from { box-shadow:0 0 5px #5c4dff;}
    to { box-shadow:0 0 15px #a08fff;}
  }

  /* Bot√£o de perfil */
  #btnPerfil {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    padding: 0;
    background-size: cover;
    background-position: center;
    border: 2px solid #5c4dff;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
  }

  /* Fases */
  #fasesContainer {
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:15px;
    justify-items:center;
    max-width:400px;
    margin:20px auto;
    z-index:1;
    position:relative;
  }

  .fase {
    width:120px;
    height:150px;
    background:#4b4b4b;
    border-radius:12px;
    padding:10px;
    cursor:pointer;
    position:relative;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .fase:hover:not(.locked) {
    transform: scale(1.1);
    box-shadow:0 0 15px #8b7dff;
  }

  .fase.locked {
    cursor:not-allowed;
  }

  .fase h2 {
    margin:0 0 10px 0;
    font-size:12px;
    color:#fff;
  }

  .stars {
    display:flex;
    gap:5px;
  }

  .star {
    font-size:14px;
    color:#ddd;
    transition:color 0.3s;
  }

  .lock {
    font-size:24px;
    color:#555;
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
  }

  /* Modal Perfil */
  #perfilModal {
    position: fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    display:none;
    justify-content:center;
    align-items:center;
    background:rgba(0,0,0,0.7);
    z-index:20;
  }

  #perfilConteudo {
    background:#2c1a5f;
    padding:20px;
    border-radius:15px;
    text-align:center;
    width:340px;
    color:#fff;
    box-shadow:0 8px 16px rgba(0,0,0,0.5);
    display:flex;
    flex-direction:column;
    align-items:center;
  }

  #perfilConteudo h2 {
    font-size:18px;
    margin-bottom:15px;
    color:#a08fff;
    text-shadow:1px 1px #000;
  }

  #perfilConteudo p {
    font-size:10px;
    margin:10px 0;
  }

  #previewFoto {
    width:80px;
    height:80px;
    border-radius:50%;
    border:3px solid #5c4dff;
    margin:10px auto;
    display:none;
    box-shadow:0 4px 8px rgba(0,0,0,0.5);
    object-fit:cover;
  }

  input[type="file"] {
    font-family:'Press Start 2P';
    font-size:10px;
    margin-top:5px;
    color:#fff;
    background:none;
    border:none;
    text-align:center;
  }

  .botoesPerfil {
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:8px;
    margin-top:10px;
  }

  .botoesPerfil button {
    margin:5px;
    padding:8px 12px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-size:10px;
    color:#fff;
    background-color:#5c4dff;
    transition: transform 0.2s, box-shadow 0.2s;
    animation: glow 2s infinite alternate;
  }

  .botoesPerfil button:hover {
    transform: scale(1.1);
    box-shadow:0 0 15px #8b7dff;
  }

  /* V√≠deo de fundo */
  #fundoVideo {
    position:fixed;
    top:0;
    left:0;
    width:100vw;
    height:100vh;
    object-fit:cover;
    z-index:-1;
  }

   .popup {
    display:none;
    position:fixed;
    inset:0;
    background: rgba(0,0,0,0.6);
    justify-content:center;
    align-items:center;
    z-index:100;
  }
  .popup .card {
    background:#fff;
    color:#222;
    font-family: 'Press Start 2P',sans-serif;
    width:320px;
    max-width:90%;
    padding:18px;
    border-radius:12px;
    text-align:center;
    font-size:11px;
    box-shadow:0 10px 30px rgba(0,0,0,0.5);
  }
  .popup .card h2 { margin:0 0 8px; color:#6b3df7; }
  .popup .card p{ margin:8px 0; color:#111; line-height:1.2; }
  .popup .card .closeBtn{
    margin-top:12px;
    background:#333; color:#fff; border:0; padding:8px 10px; border-radius:8px; cursor:pointer;
  }
</style>
</head>
<body>
<header>
  <div class="left-buttons">
    <button id="btnSom" class="general">üîä</button>
    <button id="infoButton" class="general">‚ùó</button>
    <button id="btnEstrelas" class="general">‚≠ê 0</button>
  </div>
  <div class="right-buttons">
    <button id="btnPerfil"></button>
  </div>
</header>

<div id="fasesContainer"></div>

<!-- Modal Perfil -->
<div id="perfilModal">
  <div id="perfilConteudo">
    <h2>Meu Perfil</h2>
    <p><strong>Nome de usu√°rio:</strong> <span id="nomeUsuario">Usu√°rioTeste</span></p>
    <input type="file" id="fotoPerfil" accept="image/*">
    <img id="previewFoto" alt="Foto de perfil">
    <button id="atualizarFoto" style="display:none;">Atualizar Foto</button>
    <div class="botoesPerfil">
      <button id="salvarPerfil">Salvar</button>
      <button id="fecharPerfil">Fechar</button>
      <button id="sairPerfil">Sair</button>
    </div>
  </div>
</div>

<!-- Popup Info -->
<div id="infoPopup" class="popup" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="card" role="document">
    <h2>Sobre o Jogo</h2>
    <p>Aprenda as letras brincando! Cada fase tem 3 subatividades: reconhecer, encontrar e memorizar letras.</p>
    <h3 style="margin-top:8px;font-size:10px">Cr√©ditos</h3>
    <p style="font-size:10px">Desenvolvido por Kawanna Reis üíõ ‚Äî Criatividade & Did√°tica</p>
    <button id="closePopup" class="closeBtn">Fechar</button>
  </div>
</div>

<audio id="musicaFundo" src="8bit-music-for-game-68698.mp3" autoplay loop></audio>
<video autoplay muted loop id="fundoVideo">
  <source src="./Design sem nome.mp4" type="video/mp4">
</video>

<script>
  // Progresso e estrelas
  let totalEstrelas = 0;
  const usuarioProgresso = {1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0};
  const fases = [
    {id:1,locked:false},{id:2,locked:true},{id:3,locked:true},
    {id:4,locked:true},{id:5,locked:true},{id:6,locked:true},
    {id:7,locked:true},{id:8,locked:true},{id:9,locked:true}
  ];

  function renderFases(){
    const container = document.getElementById("fasesContainer");
    container.innerHTML = "";
    totalEstrelas = 0;

    fases.forEach(fase => {
      const estrelasFase = usuarioProgresso[fase.id] || 0;
      totalEstrelas += estrelasFase;

      const div = document.createElement("div");
      div.className = "fase" + (fase.locked ? " locked" : "");

      div.innerHTML = `
        <h2>Fase ${fase.id}</h2>
        <div class="stars">
          ${[...Array(3)].map((_, i) => `<span class="star" style="color:${i<estrelasFase?'#ffd700':'#555'}">‚òÖ</span>`).join("")}
        </div>
        ${fase.locked ? '<div class="lock">üîí</div>' : ""}
      `;

      container.appendChild(div);

      div.addEventListener("click", () => {
        if(fase.locked){
          alert("Fase bloqueada!");
        } else {
          // Redireciona para a primeira atividade da fase
          switch(fase.id){
            case 1: window.location.href = "../fase1/atv1.html"; break;
            case 2: window.location.href = "../Fase2/atv1.html"; break;
            case 3: window.location.href = "../Fase3/atv1.html"; break;
            case 4: window.location.href = "../Fase4/atv1.html"; break;
            case 5: window.location.href = "../Fase5/atv1.html"; break;
            case 6: window.location.href = "../Fase6/atv1.html"; break;
            case 7: window.location.href = "../Fase7/atv1.html"; break;
            case 8: window.location.href = "../Fase8/atv1.html"; break;
            case 9: window.location.href = "../Fase9/atv1.html"; break;
            default: alert("Fase n√£o configurada!");
          }
        }
      });
    });

    document.getElementById("btnEstrelas").textContent = `‚≠ê ${totalEstrelas}`;
  }

  // Inicializa o menu
  renderFases();

  // M√∫sica
  const musica = document.getElementById('musicaFundo');
  musica.volume = 0.3;
  document.body.addEventListener('click', ()=>musica.play(), {once:true});

  document.getElementById("btnSom").addEventListener("click", function(){
    if(musica.paused){ musica.play(); this.textContent="üîä"; }
    else { musica.pause(); this.textContent="üîá"; }
  });

  // Popup Info
  const infoButton = document.getElementById('infoButton');
  const infoPopup = document.getElementById('infoPopup');
  const closePopup = document.getElementById('closePopup');

  infoButton.addEventListener('click', () => { infoPopup.style.display = 'flex'; infoPopup.setAttribute('aria-hidden','false'); });
  closePopup.addEventListener('click', () => { infoPopup.style.display = 'none'; infoPopup.setAttribute('aria-hidden','true'); });
  window.addEventListener('click', (e) => { if(e.target === infoPopup){ infoPopup.style.display = 'none'; infoPopup.setAttribute('aria-hidden','true'); } });

  // Modal Perfil
  const btnPerfil = document.getElementById("btnPerfil");
  const perfilModal = document.getElementById("perfilModal");
  const fecharPerfil = document.getElementById("fecharPerfil");
  const salvarPerfil = document.getElementById("salvarPerfil");
  const fotoInput = document.getElementById("fotoPerfil");
  const previewFoto = document.getElementById("previewFoto");
  const atualizarFoto = document.getElementById("atualizarFoto");
  const sairPerfil = document.getElementById("sairPerfil");

  btnPerfil.addEventListener("click",()=>perfilModal.style.display="flex");
  fecharPerfil.addEventListener("click",()=>perfilModal.style.display="none");

  fotoInput.addEventListener("change",(event)=>{
    const arquivo = event.target.files[0];
    if(arquivo){
      const leitor = new FileReader();
      leitor.onload = e=>{
        previewFoto.src = e.target.result;
        previewFoto.style.display = "block";
        fotoInput.style.display = "none";
        atualizarFoto.style.display = "inline-block";
      };
      leitor.readAsDataURL(arquivo);
    }
  });

  atualizarFoto.addEventListener("click",()=>fotoInput.click());

  salvarPerfil.addEventListener("click",()=>{
    const arquivo = fotoInput.files[0];
    if(arquivo){
      btnPerfil.style.backgroundImage = `url(${previewFoto.src})`;
      btnPerfil.textContent = "";
      alert("Foto de perfil salva (simula√ß√£o).");
    } else alert("Selecione uma foto antes de salvar.");
    perfilModal.style.display="none";
  });

  sairPerfil.addEventListener("click",()=>{
    perfilModal.style.display="none";
    alert("Voc√™ ser√° redirecionado para a tela de login.");
    window.location.href="inicio.html";
  });
</script>
</body>
</html>
