<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Mini-jogo Spritesheet</title>
<style>
    body {
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: white;
    }
    canvas {
        border: 1px solid #000;
    }
</style>
</head>
<body>
<canvas id="gameCanvas" width="512" height="256"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const sprite = new Image();
sprite.src = 'frog.png'; 

const frameWidth = 64;
const frameHeight = 32;
const scale = 4;

const animations = {
    idle: { row: 0, frames: 4, speed: 300 },
    hop: { row: 1, frames: 7, speed: 100 },
    hurt: { row: 2, frames: 2, speed: 200 },
    attack: { row: 3, frames: 4, speed: 150 }
};

let currentAnimation = 'idle';
let currentFrame = 0;
let lastFrameTime = 0;

// Posição do personagem
let posX = canvas.width / 2 - (frameWidth * scale) / 2;
let posY = canvas.height / 2 - (frameHeight * scale) / 2;
const speed = 5;

// Controle de teclas
const keys = {
    ArrowUp: false,
    ArrowDown: false,
    ArrowLeft: false,
    ArrowRight: false
};

function animate(timestamp) {
    if (!lastFrameTime) lastFrameTime = timestamp;
    const anim = animations[currentAnimation];

    if (timestamp - lastFrameTime > anim.speed) {
        currentFrame = (currentFrame + 1) % anim.frames;
        lastFrameTime = timestamp;
    }

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Desenha o personagem
    ctx.drawImage(
        sprite,
        currentFrame * frameWidth, anim.row * frameHeight,
        frameWidth, frameHeight,
        posX, posY,
        frameWidth * scale, frameHeight * scale
    );

    requestAnimationFrame(animate);
}

// Atualiza posição e animação de acordo com as teclas
function update() {
    let moving = false;

    if (keys.ArrowUp) { posY -= speed; moving = true; }
    if (keys.ArrowDown) { posY += speed; moving = true; }
    if (keys.ArrowLeft) { posX -= speed; moving = true; }
    if (keys.ArrowRight) { posX += speed; moving = true; }

    currentAnimation = moving ? 'hop' : 'idle';

    // Limites do canvas
    posX = Math.max(0, Math.min(canvas.width - frameWidth * scale, posX));
    posY = Math.max(0, Math.min(canvas.height - frameHeight * scale, posY));

    requestAnimationFrame(update);
}

// Detecta teclas pressionadas
window.addEventListener('keydown', (e) => {
    if (e.key in keys) keys[e.key] = true;
    if (['h','a','u','i'].includes(e.key.toLowerCase())) {
        // Animacoes extras com teclas i/h/a/u
        switch(e.key.toLowerCase()){
            case 'i': currentAnimation='idle'; break;
            case 'h': currentAnimation='hop'; break;
            case 'a': currentAnimation='attack'; break;
            case 'u': currentAnimation='hurt'; break;
        }
        currentFrame = 0;
    }
});

window.addEventListener('keyup', (e) => {
    if (e.key in keys) keys[e.key] = false;
});

sprite.onload = () => {
    requestAnimationFrame(animate);
    requestAnimationFrame(update);
};
</script>
</body>
</html>
